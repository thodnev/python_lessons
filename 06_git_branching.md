## Git Branching

- Восстановление файлов
  
  Например, c помощью `git reset --hard HEAD` (более классический вариант).

  Или же, можно по-отдельности с помощью `git restore .` (или `git restore :/`)

  Вообще `git reset` надо использовать осторожно. Это очень мощная, но и опасная команда.

- Как посмотреть какой-то коммит (например, залезть в историю ранее)

  С помощью `git checkout`:
  `git checkout a414e8f`

  Изначально он выведет страшное сообщение, но его можно отключить в конфиге как `advice.detachedHead false`

  Если я хочу после этого вернуться к предыдущему месту, я могу это сделать с помощью: `git checkout -`.

  Если я сделаю `git log` после `checkout`, может показаться что коммиты пропали. Они есть. Просто надо добавить флаг `--all`.

  Или можно вернуться с помощью указания ветки `git checkout lessons`.

  Эта же команда используется для перемещения между ветками.

### Ветвление в git

Ветки нужны чтобы можно было параллельно разрабатывать разные части проекта и т.д.

![branching](https://docs.wavemaker.com/learn/assets/images/branching-model-121bd320dd2f5972a5f6ce2fb19a3f4e.png)

![more branching](https://www.nobledesktop.com/image/gitresources/git-branches-merge.png)

Ветки могут быть очень сложными. И сложная история проекта. Например:
![non-linear history](https://blog.git-init.com/content/images/2023/11/Screenshot-2023-11-06-at-22.31.01.png)

Этого надо избегать. История должна быть линейной:
- Есть основная ветка
- Мы от нее ответвились в какую-то ветку `dev`
- В этой ветке `dev` разработали какой-то *конкретный* функционал. Например, добавили тест.
- Затем мы сливаем нашу ветку `dev` в `master`

Тогда история будет выглядеть линейно:
![linear](https://blog.danieljanus.pl/img/blog/merge-commit.svg)
...
![linear vs nonlinear](https://i.sstatic.net/ofmHX.png)

У Git есть много функций. Например, есть `git bisect`. Он позволяет обходить дерево коммитов, применяя к каждому скрипт. И находить место, где этот скрипт даст другой результат. Например, в большом проекте можно так найти точное место, где появился баг (регрессия).




Есть локальный репозиторий (на машине).
Есть удаленный (мой), куда я коммичу. Он называется обычно `origin`.
А есть основной репозиторий проекта (тоже удаленный). Он называется обычно `upstream`.

В терминах GitHub, мы берем основной репозиторий проекта (upstream). Делаем с него fork. 
И он в полном дубликате (на момент времени) появляется у нас (origin).
Затем мы разрабатываем что хотим в своем репозитории (origin).
И из него предлагаем изменения в основной проект с помощью Pull Request.
*Но* это механизм GitHub. Он не имеет вот прям непосредственного отношения к веткам. Ветки это другое.


### Работа с ветками

Основная команда `git branch`
- Чтоб посмотреть все ветки `git branch --all`
- Чтоб посмотреть подробно свитч `-v` `git branch -v`

Когда мы создаем ветку, она создается *от того* момента, который мы просматриваем в репозитории.
То есть мы должны находиться на той ветке и на том коммите, от которых хотим ответвиться.
(то есть можно ветвиться и из предыдущих моментов истории)

- Чтобы создать ветку:
  - `git branch somedev`. Она просто создаст ветку.
    После этой команды я смотрю `git branch` и вижу:
    ```
    * lessons
      somedev
    ```
    (Я сейчас нахожусь на той же ветке, где и был. Просто появилась новая)
  
  - Чтобы перейти на нее я могу использовать `git checkout`:
    
    `git checkout somedev`
  
  - Можно сразу создать ветку и перейти на нее:
    
    `git checkout -b somedev`

    Удобство в том, что он еще и создаст трекинг (то что обычно задается с помощью `git branch --track`).
    И новая ветка будет с отображенной связью со своей родительской

- Чтобы удалить ветку:
  `git branch -d somedev`

  Это сработает, если на ветке нету важного (новых коммитов или неслитых изменений).

  Тогда, чтобы принудительно удалить ветку (а надо ли это делать),
  можно использовать свитч D большое:

  `git branch -D somedev`


Обычно создают новую ветку, чтоб в ней что-то поразрабатывать.
Затем ее сливают. И **удаляют** после слияния.


### Лицензии для софта

Есть такой сайт https://choosealicense.com/

...